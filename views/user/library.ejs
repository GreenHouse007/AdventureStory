<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include('../partials/head') %>
  </head>
  <body>
    <%- include('../partials/header', { user }) %>

    <main class="container library">
      <h1 class="title">Story Library</h1>
      <p class="muted">
        Browse the adventures you can begin. Your choices will shape the endings
        you find.
      </p>

      <% if (!Array.isArray(stories) || stories.length === 0) { %>
      <div class="empty-state">
        <p>No stories available yet. Check back soon!</p>
      </div>
      <% } else { %>
      <div class="grid card-grid">
        <% stories.forEach(function(story) { %>
        <div class="story-card">
          <img
            src="<%= story.coverImage || '/images/default-cover.jpg' %>"
            alt="<%= story.title %>"
          />
          <h3><%= story.title %></h3>
          <p><%= story.description %></p>

          <% if (story.status === "public") { %>
          <a href="/u/story/<%= story._id %>" class="cta-button">Play</a>
          <% } else { %>
          <span class="coming-soon">Coming Soon</span>
          <% } %>
        </div>
        <% }) %>
      </div>
      <% } %>
    </main>

    <%- include('../partials/footer') %>
  </body>
</html>
