<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include('../partials/head') %>
  </head>
  <body>
    <%- include('../partials/header', { user }) %>

    <main class="container auth">
      <section class="form-card">
        <h1 class="title">Welcome back</h1>
        <p class="muted">Log in to continue your adventure.</p>

        <% if (typeof error !== 'undefined' && error) { %>
        <div class="alert error" data-auth-message="error"><%= error %></div>
        <% } else { %>
        <div class="alert error" data-auth-message="error" hidden></div>
        <% } %>
        <div class="alert success" data-auth-message="success" hidden></div>

        <form
          action="/login"
          method="post"
          class="stack"
          novalidate
          data-auth-form="login"
        >
          <!-- CSRF token if you enable it -->
          <% if (locals.csrfToken) { %>
          <input type="hidden" name="_csrf" value="<%= csrfToken %>" />
          <% } %>

          <label class="field">
            <span>Email</span>
            <input
              type="email"
              name="email"
              inputmode="email"
              autocomplete="email"
              required
              placeholder="you@example.com"
              value="<%= (typeof old !== 'undefined' && old && old.email) || '' %>"
            />
          </label>

          <label class="field">
            <span>Password</span>
            <input
              type="password"
              name="password"
              autocomplete="current-password"
              required
              placeholder="••••••••"
            />
          </label>

          <label class="checkbox">
            <input
              type="checkbox"
              name="remember"
              value="1"
              <%= remember ? 'checked' : '' %>
            />
            <span>Remember me on this device</span>
          </label>

          <button class="cta-button" type="submit">Log In</button>
        </form>

        <div class="auth-links">
          <a class="link" href="/forgot-password" data-reset-password
            >Forgot password?</a
          >
          <span>·</span>
          <a class="link" href="/signup">Create an account</a>
        </div>

        <div class="divider" aria-hidden="true"><span>or</span></div>
        <button class="google-button" type="button" data-google-sign-in>
          <span class="google-button__icon" aria-hidden="true">
            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" focusable="false">
              <path fill="#EA4335" d="M12 10.2v3.9h5.46c-.24 1.26-.98 2.33-2.1 3.06l3.39 2.64C20.34 17.76 21.5 15.11 21.5 12c0-.75-.07-1.47-.21-2.16H12Z" />
              <path fill="#34A853" d="M6.54 14.3a4.8 4.8 0 0 1 0-4.59L3.15 7.07A8.003 8.003 0 0 0 4 16.95l2.54-2.65Z" />
              <path fill="#4285F4" d="M12 5.5c1.13 0 2.15.39 2.96 1.15l2.21-2.21A7.968 7.968 0 0 0 4 7.05l2.54 2.65A4.77 4.77 0 0 1 12 5.5Z" />
              <path fill="#FBBC05" d="M12 20.5a4.76 4.76 0 0 1-5.46-3.35L4 16.95A7.97 7.97 0 0 0 12 21.5c1.93 0 3.69-.69 5.05-1.86l-3.39-2.64A4.77 4.77 0 0 1 12 20.5Z" />
            </svg>
          </span>
          <span class="google-button__label">Continue with Google</span>
        </button>
      </section>
    </main>

    <%- include('../partials/footer') %>
    <script>
      window.firebaseAuthPage = {
        config: <%- JSON.stringify(firebaseConfig || {}) %>,
        mode: "login",
      };
    </script>
    <script type="module" src="/js/firebase-auth.js"></script>
  </body>
</html>
