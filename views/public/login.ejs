<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include('../partials/head') %>
  </head>
  <body>
    <%- include('../partials/header', { user }) %>

    <main class="container auth">
      <section class="form-card">
        <h1 class="title">Welcome back</h1>
        <p class="muted">Log in to continue your adventure.</p>

        <% if (typeof error !== 'undefined' && error) { %>
        <div class="alert error" data-auth-message="error"><%= error %></div>
        <% } else { %>
        <div class="alert error" data-auth-message="error" hidden></div>
        <% } %>
        <div class="alert success" data-auth-message="success" hidden></div>

        <form
          action="/login"
          method="post"
          class="stack"
          novalidate
          data-auth-form="login"
        >
          <!-- CSRF token if you enable it -->
          <% if (locals.csrfToken) { %>
          <input type="hidden" name="_csrf" value="<%= csrfToken %>" />
          <% } %>

          <label class="field">
            <span>Email</span>
            <input
              type="email"
              name="email"
              inputmode="email"
              autocomplete="email"
              required
              placeholder="you@example.com"
              value="<%= (typeof old !== 'undefined' && old && old.email) || '' %>"
            />
          </label>

          <label class="field">
            <span>Password</span>
            <input
              type="password"
              name="password"
              autocomplete="current-password"
              required
              placeholder="••••••••"
            />
          </label>

          <label class="checkbox">
            <input
              type="checkbox"
              name="remember"
              value="1"
              <%= remember ? 'checked' : '' %>
            />
            <span>Remember me on this device</span>
          </label>

          <button class="cta-button" type="submit">Log In</button>
        </form>

        <div class="auth-links">
          <a class="link" href="/forgot-password" data-reset-password
            >Forgot password?</a
          >
          <span>·</span>
          <a class="link" href="/signup">Create an account</a>
        </div>

        <div class="divider" aria-hidden="true"><span>or</span></div>
        <button class="button ghost" type="button" data-google-sign-in>
          Continue with Google
        </button>
      </section>
    </main>

    <%- include('../partials/footer') %>
    <script>
      window.firebaseAuthPage = {
        config: <%- JSON.stringify(firebaseConfig || {}) %>,
        mode: "login",
      };
    </script>
    <script type="module" src="/js/firebase-auth.js"></script>
  </body>
</html>
